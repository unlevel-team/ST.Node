{"version":3,"sources":["nodeEngine/ST_Node.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAI,oBAAoB,QAAQ,wBAAR,CAAxB;;AAEA,IAAI,iBAAiB,QAAQ,qBAAR,EAA+B,cAApD;AACA,IAAI,mBAAmB,QAAQ,uBAAR,EAAiC,gBAAxD;;AAEA,IAAI,qBAAqB,QAAQ,yBAAR,CAAzB;;AAEA,IAAI,iBAAiB,QAAQ,qBAAR,CAArB;AACA,IAAI,iBAAiB,QAAQ,qBAAR,CAArB;;AAIA,IAAM,WAAW,QAAQ,UAAR,CAAjB;;;;;;IAMM,M;AAEL,mBAAc;AAAA;;AACb,OAAK,iBAAL,GAAyB,IAAzB;;AAEA,OAAK,cAAL,GAAsB,IAAtB;AACA,OAAK,gBAAL,GAAwB,IAAxB;AACA,OAAK,kBAAL,GAA0B,IAA1B;;AAEA,OAAK,cAAL,GAAsB,IAAtB;AACA,OAAK,cAAL,GAAsB,IAAtB;;AAGA,OAAK,OAAL,GAAe,IAAf;AACA;;;;;;;;;8BAKW;;AAEX,OAAI,OAAO,IAAX;;AAEA,QAAK,UAAL;;AAEA,QAAK,mBAAL;AACA,QAAK,qBAAL;AACA;;;;;;;;+BAKY;;AAEZ,OAAI,SAAS,IAAb;;AAEA,OAAI,OAAO,iBAAP,IAA4B,IAAhC,EAAsC;AACrC,UAAM,+BAAN;AACA;;;;;AAKD,UAAO,iBAAP,GAA2B,IAAI,iBAAJ,EAA3B;;AAEA,UAAO,iBAAP,CAAyB,QAAzB;;AAEA,OAAI,OAAO,iBAAP,CAAyB,MAAzB,IAAmC,IAAvC,EAA6C;;AAE5C,YAAQ,GAAR,CAAY,wBAAZ,E;;AAEA,YAAQ,IAAR,CAAa,CAAb;;AAGA;AACD,WAAQ,GAAR,CAAY,eAAZ,E;AACA,WAAQ,GAAR,CAAY,0BAAZ,E;AACA,WAAQ,GAAR,CAAY,OAAO,iBAAP,CAAyB,MAArC,E;;AAEA;;;;;;;;wCAMqB;;AAErB,OAAI,SAAS,IAAb;;AAEA,OAAI,OAAO,cAAP,IAAyB,IAA7B,EAAmC;AAClC,UAAM,8BAAN;AACA;;;;;AAKD,UAAO,cAAP,GAAwB,IAAI,cAAJ,EAAxB;;AAEA,OAAI,OAAO,OAAO,cAAlB;AACA,OAAI,aAAa,OAAO,iBAAP,CAAyB,MAA1C;;AAEA,OAAI,WAAW,OAAX,IAAsB,IAAtB,IACF,WAAW,OAAX,CAAmB,MAAnB,GAA4B,CAD9B,EACiC;;AAEhC,eAAW,OAAX,CAAmB,OAAnB,CAA2B,UAAS,IAAT,EAAe,EAAf,EAAmB;AAC7C,UAAK,SAAL,CAAe,IAAf;AACA,KAFD;;AAKA,YAAQ,GAAR,CAAa,8BAAb,E;AACA,YAAQ,GAAR,CAAa,WAAW,OAAxB,E;AACA,YAAQ,GAAR,CAAa,KAAK,UAAlB,E;AACA;;AAGD;;;;;;;;0CAMuB;;AAEvB,OAAI,SAAS,IAAb;;AAEA,OAAI,OAAO,gBAAP,IAA2B,IAA/B,EAAqC;AACpC,UAAM,gCAAN;AACA;;;;;AAKD,UAAO,gBAAP,GAA0B,IAAI,gBAAJ,EAA1B;;AAEA,OAAI,OAAO,OAAO,gBAAlB;AACA,OAAI,aAAa,OAAO,iBAAP,CAAyB,MAA1C;;AAEA,OAAI,WAAW,SAAX,IAAwB,IAAxB,IACF,WAAW,SAAX,CAAqB,MAArB,GAA8B,CADhC,EACmC;;AAElC,eAAW,SAAX,CAAqB,OAArB,CAA6B,UAAS,IAAT,EAAe,EAAf,EAAmB;AAC/C,UAAK,WAAL,CAAiB,IAAjB;AACA,KAFD;;AAIA,YAAQ,GAAR,CAAa,gCAAb,E;AACA,YAAQ,GAAR,CAAa,WAAW,SAAxB,E;AACA,YAAQ,GAAR,CAAa,KAAK,aAAlB,E;AACA;;AAGD;;;;;;;;4CAMyB;;AAEzB,OAAI,SAAS,IAAb;;AAEA,OAAI,OAAO,kBAAP,IAA6B,IAAjC,EAAuC;AACtC,UAAM,mCAAN;AACA;;;;;AAKD,UAAO,kBAAP,GAA4B,IAAI,kBAAJ,CAAwB,OAAO,iBAAP,CAAyB,MAAjD,CAA5B;;AAEA,UAAO,kBAAP,CAA0B,YAA1B,CAAuC,EAAvC,CAA2C,OAAO,kBAAP,CAA0B,SAA1B,CAAoC,MAApC,CAA2C,iBAAtF,EAAyG,UAAS,IAAT,EAAc;AACtH,YAAQ,GAAR,CAAY,kCAAZ,E;AACA,YAAQ,GAAR,CAAY,iCAAZ,E;AAEA,IAJD;;AAMA,UAAO,kBAAP,CAA0B,YAA1B,CAAuC,EAAvC,CAA2C,OAAO,kBAAP,CAA0B,SAA1B,CAAoC,MAApC,CAA2C,sBAAtF,EAA8G,UAAS,IAAT,EAAc;AAC3H,YAAQ,GAAR,CAAY,kCAAZ,E;AACA,YAAQ,GAAR,CAAY,sCAAZ,E;AAEA,IAJD;;AAMA,UAAO,kBAAP,CAA0B,YAA1B,CAAuC,EAAvC,CAA2C,OAAO,kBAAP,CAA0B,SAA1B,CAAoC,MAApC,CAA2C,aAAtF,EAAqG,UAAS,IAAT,EAAc;AAClH,YAAQ,GAAR,CAAY,kCAAZ,E;AACA,YAAQ,GAAR,CAAY,6BAAZ,E;;AAEA,WAAO,OAAP;AACA,IALD;;AAOA,UAAO,kBAAP,CAA0B,YAA1B,CAAuC,EAAvC,CAA2C,OAAO,kBAAP,CAA0B,SAA1B,CAAoC,MAApC,CAA2C,YAAtF,EAAoG,UAAS,IAAT,EAAc;AACjH,YAAQ,GAAR,CAAY,kCAAZ,E;AACA,YAAQ,GAAR,CAAY,4BAAZ,E;;AAEA,WAAO,OAAP;AACA,IALD;;AAOA,UAAO,kBAAP,CAA0B,eAA1B,G;AACA,UAAO,cAAP,CAAsB,qBAAtB,CAA6C,OAAO,kBAApD,E;AACA,UAAO,gBAAP,CAAwB,qBAAxB,CAA+C,OAAO,kBAAtD,E;;AAEA;;;;;;;;wCAMqB;;AAErB,OAAI,OAAO,IAAX;;AAEA,OAAI,KAAK,cAAL,IAAuB,IAA3B,EAAiC;AAChC,UAAM,+BAAN;AACA;;;;;AAMD,OAAI,aAAa;AACf,aAAU;AADK,IAAjB;;AAIA,QAAK,cAAL,GAAsB,IAAI,cAAJ,CAAmB,UAAnB,CAAtB;;AAEA;;;;;;;;wCAMqB;;AAErB,OAAI,OAAO,IAAX;;AAEA,OAAI,KAAK,cAAL,IAAuB,IAA3B,EAAiC;AAChC,UAAM,+BAAN;AACA;;;;AAKD,QAAK,cAAL,GAAsB,IAAI,cAAJ,CAAmB,IAAnB,EAAyB,KAAK,cAA9B,CAAtB;AACA,QAAK,cAAL,CAAoB,UAApB;AAEA;;;;;;;;4BAMS;;AAET,OAAI,OAAO,IAAX;;AAEA,WAAQ,GAAR,CAAY,mBAAZ,E;;AAEA,QAAK,kBAAL,CAAwB,oBAAxB;AACA,QAAK,cAAL,CAAoB,cAApB;AACA,QAAK,gBAAL,CAAsB,gBAAtB;;AAEA,WAAQ,IAAR,CAAa,CAAb;AACA;;;;;;;;iCAMc;;AAEd,OAAI,SAAS,IAAb;;AAEA,OAAI,OAAO,OAAP,IAAkB,IAAtB,EAA4B;AAC3B,UAAM,uBAAN;AACA;;AAED,UAAO,OAAP,GAAiB,SAAS,eAAT,CAAyB,QAAQ,KAAjC,EAAwC,QAAQ,MAAhD,CAAjB;AACA,UAAO,OAAP,CAAe,SAAf,CAAyB,UAAzB;AACA,UAAO,OAAP,CAAe,MAAf;;AAEA,UAAO,OAAP,CAAe,EAAf,CAAkB,MAAlB,EAA0B,UAAS,IAAT,EAAe;AACxC,QAAI,QAAQ,KAAK,IAAL,EAAZ;AACA,QAAI,SAAS,MAAM,KAAN,CAAY,GAAZ,CAAb;AACA,QAAI,OAAO,MAAP,GAAgB,CAApB,EAAuB;AACtB,aAAQ,OAAO,CAAP,CAAR;AACA;AACA,YAAO,KAAP;;;;;;AAMA,UAAK,MAAL;AACC,aAAO,OAAP;AACA;;AAEA,UAAK,QAAL;;AAEC,UAAI,eAAe,IAAnB;;AAEA,UAAI,OAAO,MAAP,IAAiB,CAArB,EAAwB;AACvB,eAAQ,GAAR,CAAY,gBAAZ;AACA,eAAQ,GAAR,CAAY,OAAO,cAAP,CAAsB,UAAlC;AACA,OAHD,MAGO;;AAGN,eAAQ,OAAO,CAAP,CAAR;AACF,aAAK,OAAL;AACG,iBAAQ,GAAR,CAAY,iBAAZ;;AAEA,wBAAe,OAAO,cAAP,CAAsB,aAAtB,CAAoC,OAAO,CAAP,CAApC,CAAf;AACA,aAAI,aAAa,QAAb,IAAyB,IAA7B,EAAmC;AAClC,kBAAQ,GAAR,CAAY,wBAAZ;AACA;;AAED,aAAI;AACH,uBAAa,QAAb,CAAsB,YAAtB,CAAmC,WAAnC;AACF,UAFC,CAEA,OAAO,CAAP,EAAU;AACT,kBAAQ,GAAR,CAAY,mCAAZ;AACA,kBAAQ,GAAR,CAAY,EAAE,OAAd;AACF;;AAED;;AAED,aAAK,MAAL;AACG,iBAAQ,GAAR,CAAY,gBAAZ;;AAEA,wBAAe,OAAO,cAAP,CAAsB,aAAtB,CAAoC,OAAO,CAAP,CAApC,CAAf;AACA,aAAI,aAAa,QAAb,IAAyB,IAA7B,EAAmC;AAClC,kBAAQ,GAAR,CAAY,wBAAZ;AACA;;AAED,aAAI;AACH,uBAAa,QAAb,CAAsB,YAAtB,CAAmC,UAAnC;AACF,UAFC,CAEA,OAAO,CAAP,EAAU;AACT,kBAAQ,GAAR,CAAY,kCAAZ;AACA,kBAAQ,GAAR,CAAY,EAAE,OAAd;AACF;AACD;;AAED;AACG,iBAAQ,GAAR,CAAY,WAAZ;AACG,iBAAQ,GAAR,CAAY,qBAAZ;;AAGL;AAvCC;AA0CA;AACD;;AAGA;AACC,UAAI,SAAS,EAAb,EAAiB;AACX,eAAQ,GAAR,CAAY,yCAAyC,KAAzC,GAAiD,GAA7D;AACL;AACA;AAtEJ;;AAyEA,WAAO,OAAP,CAAe,MAAf;AAED,IAjFD,EAiFG,EAjFH,CAiFM,OAjFN,EAiFe,YAAW;AACzB,WAAO,OAAP;AACA,IAnFD;AAqFA;;;;;;AAIF,OAAO,OAAP,GAAiB,MAAjB","file":"nodeEngine/ST_Node.js","sourcesContent":["\"use strict\";\r\n\r\n/*\r\n ST Node\r\n SomeThings Node\r\n\r\n\r\n- Provides the main class of ST node\r\n- Load configuration\r\n- Start managers\r\n- Start services\r\n- byebye for shutdown\r\n\r\n*/\r\n\r\n\r\n// require our modules\r\nlet NodeConfiguration = require('./NodeConfiguration.js');\r\n\r\nlet SensorsManager = require('./SensorsManager.js').SensorsManager;\r\nlet ActuatorsManager = require('./ActuatorsManager.js').ActuatorsManager;\r\n\r\nlet NodeControlService = require('./NodeControlService.js');\r\n\r\nlet NodeNetManager = require('./NodeNetManager.js');\r\nlet NodeNetService = require('./NodeNetService.js');\r\n\r\n\r\n\r\nconst readline = require('readline');\r\n\r\n\r\n/**\r\n * STNode\r\n */\r\nclass STNode {\r\n\t\r\n\tconstructor() {\r\n\t\tthis.nodeConfiguration = null;\r\n\t\t\r\n\t\tthis.sensorsManager = null;\r\n\t\tthis.actuatorsManager = null;\r\n\t\tthis.nodeControlService = null;\r\n\t\t\r\n\t\tthis.nodeNetManager = null;\r\n\t\tthis.nodeNetService = null;\r\n\r\n\t\t\r\n\t\tthis.miniCLI = null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Initialize ST Node\r\n\t */\r\n\tinit_Node() {\r\n\t\t\r\n\t\tlet node = this;\r\n\t\t\r\n\t\tnode.loadConfig();\r\n\t\t\r\n\t\tnode.init_SensorsManager();\r\n\t\tnode.init_ActuatorsManager();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Load configuration\r\n\t */\r\n\tloadConfig() {\r\n\r\n\t\tlet stNode = this;\r\n\t\t\r\n\t\tif (stNode.nodeConfiguration != null) {\r\n\t\t\tthrow 'Node configuration is loaded.';\r\n\t\t}\r\n\t\t\r\n\t\t// --- ¨¨ --- ¨¨ --- ¨¨ --- ¨¨ --- \r\n\t\t// Node configuration \r\n\t\t// -------------------------------------------------------------------------------|\\/|---\r\n\t\tstNode.nodeConfiguration = new NodeConfiguration();\r\n\r\n\t\tstNode.nodeConfiguration.readFile();\r\n\r\n\t\tif (stNode.nodeConfiguration.config == null) {\r\n\t\t\t\r\n\t\t\tconsole.log('Error in configuration');\t// TODO REMOVE DEBUG LOG\r\n\t\t\t\r\n\t\t\tprocess.exit(0);\r\n//\t\t\treturn -1;\r\n\t\t\t\r\n\t\t}\r\n\t\tconsole.log('<···> ST Node');\t// TODO REMOVE DEBUG LOG\r\n\t\tconsole.log(' <···> nodeConfiguration');\t// TODO REMOVE DEBUG LOG\r\n\t\tconsole.log(stNode.nodeConfiguration.config);\t// TODO REMOVE DEBUG LOG\r\n\t\t//-------------------------------------------------------------------------------|/\\|---\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Initialize Sensors manager\r\n\t */\r\n\tinit_SensorsManager() {\r\n\t\t\r\n\t\tlet stNode = this;\r\n\t\t\r\n\t\tif (stNode.sensorsManager != null) {\r\n\t\t\tthrow 'Sensors manager initialized.';\r\n\t\t}\r\n\t\t\r\n\t\t//--- ¨¨ --- ¨¨ --- ¨¨ --- ¨¨ --- \r\n\t\t// Sensors Manager \r\n\t\t//-------------------------------------------------------------------------------|\\/|---\r\n\t\tstNode.sensorsManager = new SensorsManager();\r\n\t\t\r\n\t\tlet snsm = stNode.sensorsManager;\r\n\t\tlet nodeConfig = stNode.nodeConfiguration.config;\r\n\r\n\t\tif (nodeConfig.sensors != null && \r\n\t\t\t\tnodeConfig.sensors.length > 0) {\r\n\t\t\t\r\n\t\t\tnodeConfig.sensors.forEach(function(sns_, _i) {\r\n\t\t\t\tsnsm.addSensor(sns_);\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t\tconsole.log( '<···> ST Node.sensorsManager' );\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log( nodeConfig.sensors );\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log( snsm.sensorList );\t// TODO REMOVE DEBUG LOG\r\n\t\t}\r\n\t\t//-------------------------------------------------------------------------------|/\\|---\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Initialize Actuators manager\r\n\t */\r\n\tinit_ActuatorsManager() {\r\n\t\t\r\n\t\tlet stNode = this;\r\n\t\t\r\n\t\tif (stNode.actuatorsManager != null) {\r\n\t\t\tthrow 'Actuators manager initialized.';\r\n\t\t}\r\n\t\t\r\n\t\t//--- ¨¨ --- ¨¨ --- ¨¨ --- ¨¨ --- \r\n\t\t// Actuators Manager \r\n\t\t//-------------------------------------------------------------------------------|\\/|---\r\n\t\tstNode.actuatorsManager = new ActuatorsManager();\r\n\t\t\r\n\t\tlet actm = stNode.actuatorsManager;\r\n\t\tlet nodeConfig = stNode.nodeConfiguration.config;\r\n\r\n\t\tif (nodeConfig.actuators != null && \r\n\t\t\t\tnodeConfig.actuators.length > 0) {\r\n\t\t\t\r\n\t\t\tnodeConfig.actuators.forEach(function(act_, _i) {\n\t\t\t\tactm.addActuator(act_);\n\t\t\t});\r\n\t\t\t\r\n\t\t\tconsole.log( '<···> ST Node.actuatorsManager' );\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log( nodeConfig.actuators );\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log( actm.actuatorsList );\t// TODO REMOVE DEBUG LOG\r\n\t\t}\r\n\t\t//-------------------------------------------------------------------------------|/\\|---\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Initialize Node Control Service\r\n\t */\r\n\tinit_NodeControlService() {\r\n\t\t\r\n\t\tlet stNode = this;\r\n\t\t\r\n\t\tif (stNode.nodeControlService != null) {\r\n\t\t\tthrow 'Node Control Service initialized.';\r\n\t\t}\r\n\t\t\r\n\t\t//--- ¨¨ --- ¨¨ --- ¨¨ --- ¨¨ --- \r\n\t\t// Node control Service \r\n\t\t//-------------------------------------------------------------------------------|\\/|---\r\n\t\tstNode.nodeControlService = new NodeControlService( stNode.nodeConfiguration.config );\r\n\r\n\t\tstNode.nodeControlService.eventEmitter.on( stNode.nodeControlService.CONSTANTS.Events.ConnectedToServer, function(data){\r\n\t\t\tconsole.log('<···> ST Node.nodeControlService');\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log(' <···> Events.ConnectedToServer');\t// TODO REMOVE DEBUG LOG\r\n\r\n\t\t});\r\n\r\n\t\tstNode.nodeControlService.eventEmitter.on( stNode.nodeControlService.CONSTANTS.Events.DisconnectedFromServer, function(data){\r\n\t\t\tconsole.log('<···> ST Node.nodeControlService');\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log(' <···> Events.DisconnectedFromServer');\t// TODO REMOVE DEBUG LOG\r\n\r\n\t\t});\r\n\r\n\t\tstNode.nodeControlService.eventEmitter.on( stNode.nodeControlService.CONSTANTS.Events.BadNodeConfig, function(data){\r\n\t\t\tconsole.log('<···> ST Node.nodeControlService');\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log(' <···> Events.BadNodeConfig');\t// TODO REMOVE DEBUG LOG\r\n\t\t\t\r\n\t\t\tstNode._byebye();\r\n\t\t});\r\n\t\t\r\n\t\tstNode.nodeControlService.eventEmitter.on( stNode.nodeControlService.CONSTANTS.Events.ShutDownNode, function(data){\r\n\t\t\tconsole.log('<···> ST Node.nodeControlService');\t// TODO REMOVE DEBUG LOG\r\n\t\t\tconsole.log(' <···> Events.ShutDownNode');\t// TODO REMOVE DEBUG LOG\r\n\t\t\t\r\n\t\t\tstNode._byebye();\r\n\t\t});\r\n\t\t\r\n\t\tstNode.nodeControlService.connectToServer();\t// Connect to server\r\n\t\tstNode.sensorsManager.setNodeControlService( stNode.nodeControlService );\t// bind to Sensors manager\r\n\t\tstNode.actuatorsManager.setNodeControlService( stNode.nodeControlService );\t// bind to Actuators manager\r\n\t\t//-------------------------------------------------------------------------------|/\\|---\r\n\t}\r\n\r\n\t\r\n\t/**\r\n\t * Initialize net manager\r\n\t */\r\n\tinit_NodeNetManager() {\r\n\t\t\r\n\t\tlet node = this;\r\n\t\t\r\n\t\tif (node.nodeNetManager != null) {\r\n\t\t\tthrow 'Node net manager initialized.';\r\n\t\t}\r\n\t\t\r\n\r\n\t\t//--- ¨¨ --- ¨¨ --- ¨¨ --- ¨¨ --- \r\n\t\t// Net Manager \r\n\t\t//-------------------------------------------------------------------------------|\\/|---\r\n\t\tlet ndm_Config = {\r\n\t\t\t\t\"_node\" : node\t\r\n\t\t\t};\r\n\t\t\t\r\n\t\tnode.nodeNetManager = new NodeNetManager(ndm_Config);\r\n\t\t//-------------------------------------------------------------------------------|/\\|---\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Initialize net service\r\n\t */\r\n\tinit_NodeNetService() {\r\n\t\t\r\n\t\tlet node = this;\r\n\t\t\r\n\t\tif (node.nodeNetService != null) {\r\n\t\t\tthrow 'Node net service initialized.';\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t//--- ¨¨ --- ¨¨ --- ¨¨ --- ¨¨ --- \r\n\t\t// Net service \r\n\t\tnode.nodeNetService = new NodeNetService(node, node.nodeNetManager);\r\n\t\tnode.nodeNetService.initialize();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Byebye\r\n\t */\r\n\t_byebye() {\r\n\t\t\r\n\t\tlet node = this;\r\n\t\t\r\n\t\tconsole.log('Have a great day!');\t// TODO REMOVE DEBUG LOG\r\n\t\t  \r\n\t\tnode.nodeControlService.disconnectFromServer();\r\n\t\tnode.sensorsManager.turnOffSensors();\r\n\t\tnode.actuatorsManager.turnOffActuators();\r\n\t\t  \r\n\t\tprocess.exit(0);\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Initialize Mini CLI\r\n\t */\r\n\tinit_MiniCLI() {\r\n\t\t\r\n\t\tlet stNode = this;\r\n\t\t\r\n\t\tif (stNode.miniCLI != null) {\r\n\t\t\tthrow 'Mini CLI initialized.';\r\n\t\t}\r\n\t\t\r\n\t\tstNode.miniCLI = readline.createInterface(process.stdin, process.stdout);\r\n\t\tstNode.miniCLI.setPrompt('STNode> ');\r\n\t\tstNode.miniCLI.prompt();\r\n\r\n\t\tstNode.miniCLI.on('line', function(line) {\r\n\t\t\tlet line_ = line.trim();\r\n\t\t\tlet _line_ = line_.split(\" \");\r\n\t\t\tif (_line_.length > 1) {\r\n\t\t\t\tline_ = _line_[0];\r\n\t\t\t}\r\n\t\t  switch(line_) {\r\n\t\t  \r\n//\t\t    case 'hello':\r\n//\t\t        console.log('world!');\r\n//\t\t        break;\r\n\t        \r\n\t\t  case 'exit':\r\n\t\t\t  stNode._byebye();\r\n\t\t\t  break;\r\n\t\t  \r\n\t\t  \tcase 'sensor':\r\n\t\t  \t\t\r\n\t\t  \t\tlet sensorSearch = null;\r\n\t\t  \t\t\r\n\t\t  \t\tif (_line_.length == 1) {\r\n\t\t  \t\t\tconsole.log('<*>Sensor List');\r\n\t\t  \t\t\tconsole.log(stNode.sensorsManager.sensorList);\r\n\t\t  \t\t} else {\r\n\t\t  \t\t\t\r\n\t\t  \t\t\t\r\n\t\t  \t\t\tswitch (_line_[1]) {\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t  \t\t\tconsole.log('<*>Sensor Start');\r\n\t\t\t  \t\t\t\r\n\t\t\t  \t\t\tsensorSearch = stNode.sensorsManager.getSensorByID(_line_[2]);\r\n\t\t\t  \t\t\tif (sensorSearch.STsensor == null) {\r\n\t\t\t\t  \t\t\tconsole.log(' <EEE>Sensor not found');\r\n\t\t\t  \t\t\t}\r\n\t\t\t  \t\t\t\r\n\t\t\t  \t\t\ttry {\r\n\t\t\t\t  \t\t\tsensorSearch.STsensor.sensorEngine.startEngine();\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t  \t\t\tconsole.log(' <EEE>Sensor Error at startEngine');\r\n\t\t\t\t  \t\t\tconsole.log(e.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t  \t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tcase 'stop':\r\n\t\t\t  \t\t\tconsole.log('<*>Sensor Stop');\r\n\r\n\t\t\t  \t\t\tsensorSearch = stNode.sensorsManager.getSensorByID(_line_[2]);\r\n\t\t\t  \t\t\tif (sensorSearch.STsensor == null) {\r\n\t\t\t\t  \t\t\tconsole.log(' <EEE>Sensor not found');\r\n\t\t\t  \t\t\t}\r\n\t\t\t  \t\t\t\r\n\t\t\t  \t\t\ttry {\r\n\t\t\t\t  \t\t\tsensorSearch.STsensor.sensorEngine.stopEngine();\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t  \t\t\tconsole.log(' <EEE>Sensor Error at stopEngine');\r\n\t\t\t\t  \t\t\tconsole.log(e.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t  \t\t\tconsole.log('<*>Sensor');\r\n\t\t  \t\t\t    console.log(' <EEE>Bad parameter');\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t  \t\t\t\r\n\t\t  \t\t}\r\n\t\t  \t\tbreak;\r\n\t\t  \t\r\n\t\t  \t\r\n\t\t    default:\r\n\t\t    \tif (line_ != '') {\r\n\t\t    \t      console.log('>???> Say what? I might have heard `' + line_ + '`');\r\n\t\t    \t}\r\n\t\t      break;\r\n\t\t  }\r\n\t\t  \r\n\t\t  stNode.miniCLI.prompt();\r\n\t\t  \r\n\t\t}).on('close', function() {\r\n\t\t\tstNode._byebye();\r\n\t\t});\r\n\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = STNode;\r\n"],"sourceRoot":"C:\\Users\\Felipe\\Documents\\Work\\SomeThings\\dev\\NLVL_STNode\\es6"}